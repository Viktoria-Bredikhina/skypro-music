{"ast":null,"code":"var _jsxFileName = \"/Users/viktoriabredihina/Downloads/skypro-music/src/components/ItemTracks/ItemTracks.jsx\";\nimport React from \"react\";\nimport * as S from \"./ItemTracksStyle\";\nimport { useSelector } from \"react-redux\";\nimport { useEffect, useState } from \"react\";\nimport { currentTrackSelector, isPlayingSelector } from \"../../store/selectors/track\";\nimport { AudioPlayerIcons } from \"../AudioPlayerIcons/AudioPlayerIcons\";\nimport { useSetLikeMutation, useSetDislikeMutation } from \"../../serviseQuery/tracks\";\nexport function ItemTracks({\n  track,\n  isLoading\n}) {\n  var _track$stared_user;\n  const currentTrack = useSelector(currentTrackSelector);\n  const isPlaying = useSelector(isPlayingSelector);\n  const [setLike] = useSetLikeMutation();\n  const [setDislike] = useSetDislikeMutation();\n  const auth = JSON.parse(localStorage.getItem(\"user\"));\n  const isUserLike = Boolean(track === null || track === void 0 ? void 0 : (_track$stared_user = track.stared_user) === null || _track$stared_user === void 0 ? void 0 : _track$stared_user.find(user => user.id === auth.id));\n  const [isLiked, setIsLiked] = useState(isUserLike);\n  useEffect(() => {\n    if (track === null || track === void 0 ? void 0 : track.stared_user) {\n      setIsLiked(isUserLike);\n    } else {\n      setIsLiked(true);\n    }\n  }, [isUserLike, track === null || track === void 0 ? void 0 : track.stared_user]);\n  const handleLike = async id => {\n    setIsLiked(true);\n    await setLike({\n      id\n    }).unwrap();\n  };\n  const handleDislike = async id => {\n    setIsLiked(false);\n    await setDislike({\n      id\n    }).unwrap();\n  };\n  const toggleLikeDislike = id => isLiked ? handleDislike(id) : handleLike(id);\n  return /*#__PURE__*/React.createElement(S.PlaylistTrack, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(S.trackTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(S.trackTitleImage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  }, currentTrack && currentTrack.id === (track === null || track === void 0 ? void 0 : track.id) ? /*#__PURE__*/React.createElement(S.PointPlaying, {\n    $playing: isPlaying,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }) : /*#__PURE__*/React.createElement(S.trackTitleSvg, {\n    alt: \"music\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"use\", {\n    xlinkHref: \"img/icon/sprite.svg#icon-note\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 15\n    }\n  }))), !isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"track__title-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(S.trackTitleLink, {\n    href: \"http://\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, track.name, track.remix ? /*#__PURE__*/React.createElement(S.trackTitleSpan, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, \"(\", track.remix, \")\") : \"\")) : /*#__PURE__*/React.createElement(S.Skeleton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  })), !isLoading ? /*#__PURE__*/React.createElement(S.trackAuthor, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(S.trackAuthorLink, {\n    href: \"http://\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, track.author)) : /*#__PURE__*/React.createElement(S.Skeleton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }), !isLoading ? /*#__PURE__*/React.createElement(S.trackAlbum, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(S.trackAlbumLink, {\n    href: \"http://\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }, track.album)) : /*#__PURE__*/React.createElement(S.skeletonAlbum, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }), !isLoading && /*#__PURE__*/React.createElement(S.trackTime, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(AudioPlayerIcons, {\n    alt: \"like\",\n    click: () => {\n      toggleLikeDislike(track === null || track === void 0 ? void 0 : track.id);\n    },\n    isActive: isLiked,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(S.trackTimeText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, \" \", Math.floor(track.duration_in_seconds / 60) + \":\" + (track.duration_in_seconds % 60 < 10 ? track.duration_in_seconds % 60 + \"0\" : track.duration_in_seconds % 60) || (track.duration_in_seconds % 60 === 0 ? \"00\" : track.duration_in_seconds % 60))));\n}","map":{"version":3,"names":["React","S","useSelector","useEffect","useState","currentTrackSelector","isPlayingSelector","AudioPlayerIcons","useSetLikeMutation","useSetDislikeMutation","ItemTracks","track","isLoading","_track$stared_user","currentTrack","isPlaying","setLike","setDislike","auth","JSON","parse","localStorage","getItem","isUserLike","Boolean","stared_user","find","user","id","isLiked","setIsLiked","handleLike","unwrap","handleDislike","toggleLikeDislike","createElement","PlaylistTrack","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","trackTitle","trackTitleImage","PointPlaying","$playing","trackTitleSvg","alt","xlinkHref","className","trackTitleLink","href","name","remix","trackTitleSpan","Skeleton","trackAuthor","trackAuthorLink","author","trackAlbum","trackAlbumLink","album","skeletonAlbum","trackTime","click","isActive","trackTimeText","Math","floor","duration_in_seconds"],"sources":["/Users/viktoriabredihina/Downloads/skypro-music/src/components/ItemTracks/ItemTracks.jsx"],"sourcesContent":["import React from \"react\";\nimport * as S from \"./ItemTracksStyle\";\nimport { useSelector } from \"react-redux\";\n\nimport { useEffect, useState } from \"react\";\nimport {\n  currentTrackSelector,\n  isPlayingSelector,\n} from \"../../store/selectors/track\";\nimport { AudioPlayerIcons } from \"../AudioPlayerIcons/AudioPlayerIcons\";\nimport {\n  useSetLikeMutation,\n  useSetDislikeMutation,\n} from \"../../serviseQuery/tracks\";\n\nexport function ItemTracks({ track, isLoading }) {\n  const currentTrack = useSelector(currentTrackSelector);\n  const isPlaying = useSelector(isPlayingSelector);\n  const [setLike] = useSetLikeMutation();\n  const [setDislike] = useSetDislikeMutation();\n  const auth = JSON.parse(localStorage.getItem(\"user\"));\n  const isUserLike = Boolean(\n    track?.stared_user?.find((user) => user.id === auth.id)\n  );\n  const [isLiked, setIsLiked] = useState(isUserLike);\n\n  useEffect(() => {\n    if (track?.stared_user) {\n      setIsLiked(isUserLike);\n    } else {\n      setIsLiked(true);\n    }\n  }, [isUserLike, track?.stared_user]);\n\n  const handleLike = async (id) => {\n    setIsLiked(true);\n    await setLike({ id }).unwrap();\n  };\n\n  const handleDislike = async (id) => {\n    setIsLiked(false);\n    await setDislike({ id }).unwrap();\n  };\n\n  const toggleLikeDislike = (id) =>\n    isLiked ? handleDislike(id) : handleLike(id);\n\n  return (\n    <S.PlaylistTrack>\n      <S.trackTitle>\n        <S.trackTitleImage>\n          {currentTrack && currentTrack.id === track?.id ? (\n            <S.PointPlaying $playing={isPlaying} />\n          ) : (\n            <S.trackTitleSvg alt=\"music\">\n              <use xlinkHref=\"img/icon/sprite.svg#icon-note\" />\n            </S.trackTitleSvg>\n          )}\n        </S.trackTitleImage>\n\n        {!isLoading ? (\n          <div className=\"track__title-text\">\n            <S.trackTitleLink href=\"http://\">\n              {track.name}\n              {track.remix ? (\n                <S.trackTitleSpan>({track.remix})</S.trackTitleSpan>\n              ) : (\n                \"\"\n              )}\n            </S.trackTitleLink>\n          </div>\n        ) : (\n          <S.Skeleton />\n        )}\n      </S.trackTitle>\n\n      {!isLoading ? (\n        <S.trackAuthor>\n          <S.trackAuthorLink href=\"http://\">{track.author}</S.trackAuthorLink>\n        </S.trackAuthor>\n      ) : (\n        <S.Skeleton />\n      )}\n\n      {!isLoading ? (\n        <S.trackAlbum>\n          <S.trackAlbumLink href=\"http://\">{track.album}</S.trackAlbumLink>\n        </S.trackAlbum>\n      ) : (\n        <S.skeletonAlbum />\n      )}\n      {!isLoading && (\n        <S.trackTime>\n          <AudioPlayerIcons\n            alt=\"like\"\n            click={() => {\n              toggleLikeDislike(track?.id);\n            }}\n            isActive={isLiked}\n          />\n\n          <S.trackTimeText>\n            {\" \"}\n            {Math.floor(track.duration_in_seconds / 60) +\n              \":\" +\n              (track.duration_in_seconds % 60 < 10\n                ? (track.duration_in_seconds % 60) + \"0\"\n                : track.duration_in_seconds % 60) ||\n              (track.duration_in_seconds % 60 === 0\n                ? \"00\"\n                : track.duration_in_seconds % 60)}\n          </S.trackTimeText>\n        </S.trackTime>\n      )}\n    </S.PlaylistTrack>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}